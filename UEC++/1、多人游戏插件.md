# 1、多人游戏概念(数据通信)

## 1. 点对点（Peer To Peer）
![[P-P.png]]
- 不适用于大型多人游戏
- 不存在游戏的权威版本，每个用户的游戏实例不同（延迟+挂）
## 2. 客户端-服务器（Client-Server
）
一台专用机器做服务器，每个客户端只需和服务器通信
（服务器上的版本是权威版本）
![[C-S.png]]
### 监听服务器（Listen-Server）
1. 本质
	- 运行游戏（服务器版本）
	- 渲染图像
2. 特点
	- 作为服务器端，运行速度快（不存在数据传输），无延迟
	- 客户机延迟（向服务器发送请求，等待数据复制返回）
3. 适用
	- 网络连接好的小型（玩家数量少）游戏

### 专用服务器（Dedicated-Server）
1. 本质
- 不运行游戏，只处理游戏的权威版本
- 不渲染图像
2. 适用
	- mmo
	- 高风险的竞争游戏
	- 涉及金钱的游戏
## 3、UE5采用C-S
- 单人游戏也是C-S架构，只是客户机和服务器为同一台机器
- 可配置Listen或者Dedicated Server
# 2、多人游戏网络连接
## 1、局域网连接（LAN）
![[LAN.png]]
几台电脑通过本地网络连接，IP地址区分
### 1、蓝图实现
![[蓝图LAN.png]]
1. OpenLevelByName
	- 打开Lobby地图
	- 设为lisen服务器
2. Execute Console Command
	- 命令行指令连接Sever（通过IP）
### 2、C++实现
![[C++LAN.png]]
1. OpenLobby()=OpenLevel()
	```C++
	UFUNCTION(BuleprintCallable)
	void OpenLobby(FString* Address)
	{
		UWorld* World = GetWorld();
		if(World)
		{
			World->ServerTravel("/Game/ThirdPerson/Maps/Lobby?lisen");
		}
	}
	```
1. 